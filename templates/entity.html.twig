{% import 'components/form/fields_macros.html.twig' as fields %}

{% if canedit %}
<form id="transferticketentity"
      name="form"
      action="{{ form_path }}"
      method="post"
      data-track-changes="true">
    <input type="hidden" name="_glpi_csrf_token" value="{{ csrf_token() }}" />
    {% endif %}

    <div class="row">
        {{ fields.smallTitle(__("Settings Transfer Ticket Entity", "transferticketentity")) }}
        {{ fields.hiddenField('entity_id', item.getID(), '') }}
        {{ fields.dropdownYesNo('allow_transfer', checkRights['allow_transfer'], __('Allow Transfer function', 'transferticketentity'),
            {
                'full_width': true
            }
        ) }}
        {{ fields.dropdownYesNo('allow_entity_only_transfer', checkRights['allow_entity_only_transfer'], __('Assigned group required', 'transferticketentity'),
        {
            'add_field_attribs': {
                'style': 'display: none;'
            },
            'full_width': true
        }
        ) }}
        {{ fields.dropdownYesNo('justification_transfer', checkRights['justification_transfer'], __('Justification required', 'transferticketentity'),
        {
            'add_field_attribs': {
                'style': 'display: none;'
            },
            'full_width': true
        }
        ) }}
        {{ fields.dropdownYesNo('keep_category', checkRights['keep_category'], __('Keep category after transfer', 'transferticketentity'),
            {
                'add_field_attribs': {
                    'style': 'display: none;'
                },
                'full_width': true
            }
        ) }}
        {{ fields.dropdownArrayField('itilcategories_id', checkRights['itilcategories_id'], availableCategories, __('Default category', 'transferticketentity'),
            {
                'add_field_attribs': {
                    'style': 'display: none;'
                },
                'display_emptychoice': true,
            }
        ) }}
    </div>

    {% if canedit %}
    <div class="card-footer mx-n2 d-flex">
        <button type="submit" name="update" value="1" class="ms-auto btn btn-primary">
            <i class="ti ti-device-floppy"></i>
            <span>{{ _x('button', 'Save') }}</span>
        </button>
    </div>
</form>
{{ call('Html::script', ['/plugins/transferticketentity/js/entitySettings.js']) | raw }}
{% endif %}
